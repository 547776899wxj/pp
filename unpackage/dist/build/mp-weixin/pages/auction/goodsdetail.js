(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/auction/goodsdetail"],{1915:function(t,o,n){"use strict";n.r(o);var e=n("eda9"),i=n.n(e);for(var s in e)"default"!==s&&function(t){n.d(o,t,(function(){return e[t]}))}(s);o["default"]=i.a},"6e5a":function(t,o,n){},"6f8b":function(t,o,n){"use strict";var e=n("6e5a"),i=n.n(e);i.a},7858:function(t,o,n){"use strict";var e;n.d(o,"b",(function(){return i})),n.d(o,"c",(function(){return s})),n.d(o,"a",(function(){return e}));var i=function(){var t=this,o=t.$createElement;t._self._c;t._isMounted||(t.e0=function(o){t.customerAlert=!0},t.e1=function(o){t.customerAlert=!1})},s=[]},a849:function(t,o,n){"use strict";(function(t){n("27ea");e(n("66fd"));var o=e(n("add2"));function e(t){return t&&t.__esModule?t:{default:t}}t(o.default)}).call(this,n("543d")["createPage"])},add2:function(t,o,n){"use strict";n.r(o);var e=n("7858"),i=n("1915");for(var s in i)"default"!==s&&function(t){n.d(o,t,(function(){return i[t]}))}(s);n("6f8b");var a,c=n("f0c5"),u=Object(c["a"])(i["default"],e["b"],e["c"],!1,null,null,null,!1,e["a"],a);o["default"]=u.exports},eda9:function(t,o,n){"use strict";(function(t){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var e=function(){n.e("pages/component/customer").then(function(){return resolve(n("1788"))}.bind(null,n)).catch(n.oe)},i={components:{customer:e},data:function(){return{lotId:"",auctionId:"",lotSellerName:"",countDownStr:"",countDownArr:["00","00","00"],vipCoupon:!1,customerAlert:!1,isFollowLot:!1,lotObj:{},auction:{},goodsId:"",timerId:"",swiperList:[],goodsDetail:{goodsDesc:[],goodsAttrList:[]},dotStyle:!1,player:{},current:1,videoShow:!0,goodsTabCur:0,goodsTab:[]}},onLoad:function(t){this.goodsId=t.goodsId||"800000041",this.lotId=t.lotId||"800000041-3",this.auctionId=t.auctionId||"130"},onShow:function(){this.player=t.createVideoContext("myVideo"),this.getGoodsDetail(),this.getLot()},onPullDownRefresh:function(){setTimeout(t.stopPullDownRefresh,500),this.getGoodsDetail(),this.getLot()},beforeDestroy:function(){clearInterval(this.timerId)},beforeRouteLeave:function(){clearInterval(this.timerId)},methods:{getLot:function(){var o=this;t.$api.getLot({lotId:this.lotId,auctionId:this.auctionId}).then((function(n){o.lotObj=n.data,o.lotObj.lock=t.$session.checkLotId(o.auctionId,o.lotObj.auctionLotAutoId),o.isFollowLot=n.isFollowLot,o.lotSellerName=n.lotSellerName,o.vipCoupon=n.vipCoupon,n.auction&&(o.auction=n.auction,o.nowTime=parseInt(n.nowTime),o.countDown())}))},countDown:function(){if(this.auction.auctionBeginTime){var o=new Date(this.auction.auctionBeginTime.replace(/\-/g,"/")).getTime();this.vipCoupon&&(o-=6e4);var n=new Date(this.auction.auctionEndTime.replace(/\-/g,"/")).getTime(),e=this;this.timerId&&(clearInterval(this.timerId),this.timerId=0),this.timerId=setInterval((function(){e.nowTime+=1e3,e.nowTime>o&&e.nowTime<=n?(e.countDownStr=t.$utils.date.countDown(e.nowTime,n),e.countDownArr=e.countDownStr.split(":"),e.auction.auctionStatus=1):e.nowTime<=o?(e.countDownStr=t.$utils.date.countDown(e.nowTime,o),e.countDownArr=e.countDownStr.split(":")):(e.auction.auctionStatus=2,e.countDownStr="",e.countDownArr=["00","00","00"],clearInterval(e.timerId))}),1e3)}},goodsTabClick:function(o){this.goodsTabCur=o;var n=this.goodsTab[o-1].cssId;t.createSelectorQuery().select("#"+n).boundingClientRect((function(o){t.pageScrollTo({duration:200,scrollTop:o.top})})).exec()},swiperChange:function(t,o){var n=t.target.current;this.current=n+1},back:function(){t.navigateBack()},getGoodsDetail:function(){var o=this,n={goodsId:this.goodsId};t.$api.getGoodsDetail(n).then((function(t){t.success&&o.handlerGoodsData(t.data)})).catch((function(o){t.$toast.showError(o.message)}))},handlerGoodsData:function(o){o.goodsDesc&&(o.goodsDesc=t.$utils.formatRichTextImage(o.goodsDesc)),this.goodsDetail=o,this.handlerSwiper(),this.handlerGoodsTab()},handlerSwiper:function(){var t=this.goodsDetail,o=[];if(t.goodsImages&&t.goodsImages.length>0)for(var n in t.goodsImages)o.push({url:t.goodsImages[n].goodsImagePath});this.swiperList=o},handlerGoodsTab:function(){var t,o=this.goodsDetail,n=[];o.goodsVideoUrl&&n.push({id:1,name:"商品视频",cssId:"video-box"}),o.goodsAttrList&&o.goodsAttrList.length>0&&n.push({id:2,name:"商品参数",cssId:"param-box"}),o.goodsDesc&&n.push({id:3,name:"商品详情",cssId:"desc-box"}),this.goodsTabCur=null===(t=n[0])||void 0===t?void 0:t.id,this.goodsTab=n},followLot:function(){var o=this;t.$api.followLot({auctionLotAutoId:this.auctionId+"-"+this.lotId}).then((function(n){t.$toast.showSuccess("操作成功");var e=o.lotObj;o.isFollowLot=!o.isFollowLot,o.isFollowLot?e.auctionLotFollow++:e.auctionLotFollow--}))},secKillLot:function(){var o=this;if(!this.btnloading){this.btnloading=!0;var n=this;setTimeout((function(){return n.btnloading=!1}),500),t.$api.secKillLot({auctionId:this.auctionId,lotId:this.lotObj.lotId}).then((function(n){t.$toast.showSuccess("抢购成功"),t.$session.lockLotId(o.auctionId,o.lotObj.auctionLotAutoId),o.lotObj.lock=!0})).catch((function(o){t.$toast.showError(o.message)})).finally((function(){setTimeout(t.hideToast,3e3)}))}}}};o.default=i}).call(this,n("543d")["default"])}},[["a849","common/runtime","common/vendor"]]]);