(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login"],{"24c5":function(n,o,e){"use strict";var t;e.d(o,"b",(function(){return i})),e.d(o,"c",(function(){return s})),e.d(o,"a",(function(){return t}));var i=function(){var n=this,o=n.$createElement;n._self._c},s=[]},"41aa":function(n,o,e){"use strict";e.r(o);var t=e("24c5"),i=e("eaff");for(var s in i)"default"!==s&&function(n){e.d(o,n,(function(){return i[n]}))}(s);e("86a1");var c,r=e("f0c5"),a=Object(r["a"])(i["default"],t["b"],t["c"],!1,null,null,null,!1,t["a"],c);o["default"]=a.exports},4200:function(n,o,e){"use strict";(function(n,e){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var t={data:function(){return{form:{userName:"",password:"",isCheck:!0},md5LocalKey:"9909",ckVersion:"",clientInfo:{id:"",token:"",clientid:"",appid:"",appkey:""},devType:""}},created:function(){},onShow:function(){this.ckVersion=n.$session.getIosCkVersion()||""},methods:{setPhoneInfo:function(){console.log("setPhoneInfo:");var n=this.getDevPlate(),o=plus.push.getClientInfo();this.devType=n,this.clientInfo=o},getPhoneMd5:function(o,e){var t=e+o+this.md5LocalKey;return console.log("md5Str:"+t),n.$utils.strMd5(t)},uniLogin:function(o){var t=this;n.login({provider:"univerify",univerifyStyle:{fullScreen:!1,otherLoginButton:{}},success:function(i){var s=i.authResult.access_token,c=i.authResult.openid;e.callFunction({name:"getPhoneNumber",data:{access_token:s,openid:c}}).then((function(n){var e=n.result,i=e.phoneNumber;t.phoneLogin(i,o)})).catch((function(o){console.log(JSON.stringify(o)),n.$toast.showError("登录失败:"+o.errMsg),n.closeAuthView()}))},fail:function(o){console.log(JSON.stringify(o));var e="";e=30003==o.errCode?"用户取消":o.errMsg,n.$toast.showError("登录失败:"+e),n.closeAuthView()}})},phoneOneCodeLogin:function(){var o={clientId:this.clientInfo.clientid},e=this;n.$api.getPhoneLoginMD5Code(o).then((function(n){console.log("MD5KEY,随机数",n.key);var o=n.key;e.uniLogin(o)}))},phoneLogin:function(o,e){var t=this,i=this.getPhoneMd5(o,e),s={phoneNum:o,phoneNumMd5:i,clientId:this.clientInfo.clientid,clientType:this.devType};console.log("登录:"+JSON.stringify(s)),n.$api.loginByLocalMobile(s).then((function(o){console.log("接口返参:"+JSON.stringify(o)),n.closeAuthView(),n.$toast.showToast("登录成功！"),n.$auth.loginSuccess(o),setTimeout((function(){t.onLoginClose()}),1e3)})).catch((function(o){n.$toast.showError("登录失败:"+o.message),n.closeAuthView()}))},getDevPlate:function(){return n.getSystemInfoSync().platform},wxLogin:function(){var o=this;n.getProvider({service:"oauth",success:function(e){~e.provider.indexOf("weixin")&&n.login({provider:"weixin",success:function(e){console.log("App微信获取用户信息成功",e);var t=e.authResult||{},i=t.openid,s=t.unionid,c=t.access_token;i?n.$api.loginByWxOpenId({access_token:c,openid:i,unionid:s}).then((function(e){var t=e||{},s=t.exist,c=t.nickname;if("1"==s)n.$toast.showToast("登录成功！"),n.$auth.loginSuccess(e),setTimeout((function(){o.onLoginClose()}),1e3);else{var r={openid:i,nickname:c};n.navigateTo({url:"/pages/login/phonebindwx?data="+encodeURIComponent(JSON.stringify(r))})}})):n.$toast.showError(e.errMsg)},fail:function(o){console.log("App微信获取用户信息失败",o),n.$toast.showError(o.errMsg)}})}})},goToRegister:function(){n.navigateTo({url:"/pages/login/register"})},onLoginClose:function(){n.switchTab({url:"/pages/index/main"})},onLogin:function(){var o=this,e=this.form,t=e.userName,i=e.password;e.isCheck;t?i?(console.log(n.$config,t,i),n.$api.loginByMobileWithPassword({mobile:t,password:i}).then((function(e){console.log(JSON.stringify(e)),n.$toast.showToast("登录成功！"),n.$auth.loginSuccess(e),setTimeout((function(){o.onLoginClose()}),1e3)}))):n.$toast.showError("请输入密码"):n.$toast.showError("请输入手机号码")}}};o.default=t}).call(this,e("543d")["default"],e("a9ff")["default"])},"855a":function(n,o,e){},"86a1":function(n,o,e){"use strict";var t=e("855a"),i=e.n(t);i.a},be48:function(n,o,e){"use strict";(function(n){e("27ea");t(e("66fd"));var o=t(e("41aa"));function t(n){return n&&n.__esModule?n:{default:n}}n(o.default)}).call(this,e("543d")["createPage"])},eaff:function(n,o,e){"use strict";e.r(o);var t=e("4200"),i=e.n(t);for(var s in t)"default"!==s&&function(n){e.d(o,n,(function(){return t[n]}))}(s);o["default"]=i.a}},[["be48","common/runtime","common/vendor"]]]);