(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/set"],{"198d":function(e,t,o){"use strict";(function(e){o("27ea");n(o("66fd"));var t=n(o("46f6"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,o("543d")["createPage"])},"2d07":function(e,t,o){"use strict";o.d(t,"b",(function(){return s})),o.d(t,"c",(function(){return i})),o.d(t,"a",(function(){return n}));var n={helangCompress:function(){return Promise.all([o.e("common/vendor"),o.e("components/helang-compress/helang-compress")]).then(o.bind(null,"b1c6"))}},s=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){e.posterPath=t},e.e1=function(t){e.showPoster=!1})},i=[]},"46f6":function(e,t,o){"use strict";o.r(t);var n=o("2d07"),s=o("745f");for(var i in s)"default"!==i&&function(e){o.d(t,e,(function(){return s[e]}))}(i);o("9c12");var r,a=o("f0c5"),c=Object(a["a"])(s["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],r);t["default"]=c.exports},"745f":function(e,t,o){"use strict";o.r(t);var n=o("f1da"),s=o.n(n);for(var i in n)"default"!==i&&function(e){o.d(t,e,(function(){return n[e]}))}(i);t["default"]=s.a},"9c12":function(e,t,o){"use strict";var n=o("abeb"),s=o.n(n);s.a},abeb:function(e,t,o){},f1da:function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){Promise.all([o.e("common/vendor"),o.e("components/uni-popup/uni-popup")]).then(function(){return resolve(o("1d8f"))}.bind(null,o)).catch(o.oe)},s=function(){o.e("components/uni-popup/uni-popup-dialog").then(function(){return resolve(o("f666"))}.bind(null,o)).catch(o.oe)},i=function(){Promise.all([o.e("common/vendor"),o.e("components/helang-compress/helang-compress")]).then(function(){return resolve(o("b1c6"))}.bind(null,o)).catch(o.oe)},r=function(){Promise.all([o.e("common/vendor"),o.e("uni_modules/lime-painter/components/lime-painter/index")]).then(function(){return resolve(o("f735"))}.bind(null,o)).catch(o.oe)},a={components:{helangCompress:i,uniPopup:n,uniPopupDialog:s,lPainter:r},data:function(){return{userInfo:{},showPoster:!1,posterPath:"",shareUrl:"",base:{width:"517rpx",height:"880rpx",views:[]}}},onLoad:function(){this.fetchData()},methods:{downloadSuc:function(){var t=this;e.saveImageToPhotosAlbum({filePath:t.posterPath,success:function(o){t.showPoster=!1,e.showToast({title:"已保存到相册",icon:"success",duration:2e3})}})},popOpen:function(){this.$refs.popup.open()},popClose:function(){this.$refs.popup.close()},popConfirm:function(t){var o=this;console.log("asdf",n);var n=t[1].trim();n?e.$utils.getByteLen(n)>12?e.$toast.showToast("不能超过12个字符，一个中文2个字符"):(this.popClose(),console.log(n),e.showLoading({title:"保存中"}),e.$api.saveUserNickName({userNickName:n}).then((function(t){e.$toast.showToast("保存成功"),e.hideLoading(),o.fetchData()})).catch((function(){e.hideLoading()}))):e.$toast.showToast("昵称不能为空")},fetchData:function(){var t=this;e.$api.getUserInfo().then((function(e){t.userInfo=e.data||{}})),e.$api.getUserSpreadShareUrl().then((function(e){t.shareUrl=e.url}))},buildPoster:function(){e.showLoading({title:"正在生成中。。。"});var t=this.userInfo.userNickName?this.userInfo.userNickName:"",o=this.userInfo.mobile?this.userInfo.mobile:"";if(o&&o.length>7){var n=/^(\d{3})\d{4}(\d{4})$/;o=o.replace(n,"$1****$2")}var s=this,i={width:"517rpx",height:"880rpx",views:[{type:"image",src:"/static/img/bg/share-pop@2x.png",mode:"scaleToFill",css:{left:"0rpx",top:"0rpx",width:"517rpx",height:"880rpx"}},{type:"image",src:s.userInfo.userPhoto?s.userInfo.userPhoto:"/static/img/icon/default-user.png",mode:"scaleToFill",css:{top:"72rpx",left:"145rpx",width:"64rpx",height:"64rpx",radius:"10rpx",backgroundColor:"#fff"}},{type:"text",text:t,css:{color:"#fff",left:"225rpx",top:"65rpx",fontWeight:"bold",fontSize:"28rpx",lineHeight:"28rpx"}},{type:"text",text:o,css:{color:"#fff",left:"225rpx",top:"105rpx",fontWeight:"bold",fontSize:"28rpx",lineHeight:"28rpx"}},{type:"text",text:"- "+t+"邀请您注册好获拍拍领取福利 -",css:{width:"517rpx",color:"#fff",left:"0rpx",top:"266rpx",fontSize:"24rpx",lineHeight:"24rpx",textAlign:"center"}},{type:"image",src:"/static/img/bg/share-code@2x.png",mode:"scaleToFill",css:{top:"502rpx",left:"143rpx",width:"235rpx",height:"235rpx",radius:"10rpx",backgroundColor:"#fff"}},{type:"qrcode",text:s.shareUrl,css:{left:"151rpx",top:"511rpx",width:"218rpx",height:"218rpx"}},{type:"image",src:"/static/img/images/logo_55.png",mode:"scaleToFill",css:{top:"593rpx",left:"233rpx",width:"55rpx",height:"55rpx"}}]};s.base=i,setTimeout((function(){e.hideLoading(),s.showPoster=!0}),1e3)},loginOut:function(){e.$session.loginOUt(),e.reLaunch({url:"../login/login"})},onChooseImage:function(){var t=this;e.chooseImage({count:1,success:function(o){t.$refs.helangCompress.compress({src:o.tempFilePaths[0],maxSize:800,fileType:"png",quality:.85}).then((function(o){e.$api.uploadFileOSS(o).then((function(e){t.saveUserPhoto(e.path)}))})).catch((function(t){e.$toast.showToast("图片压缩失败")}))}})},saveUserPhoto:function(t){var o=this;e.$api.saveUserPhoto({userPhoto:t}).then((function(n){e.$toast.showSuccess("保存成功"),o.userInfo.userPhoto=t}))}}};t.default=a}).call(this,o("543d")["default"])}},[["198d","common/runtime","common/vendor"]]]);